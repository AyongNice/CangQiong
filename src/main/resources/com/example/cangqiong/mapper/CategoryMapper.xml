<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.cangqiong.mapper.CategoryMapper">


    <insert id="addCategory">
        insert into category (type, name, sort, status,  create_time, create_user, update_time, update_user)
        values (#{type},#{name}, #{sort}, #{status} ,#{createTime}, #{createUser}, #{updateTime}, #{updateUser})
    </insert>
    <select id="page" >
        select
        id,
        name,
        type,
        sort,
        status,
        date_format(create_time,'%Y-%m-%d') as createTime,
        date_format(update_time, '%Y-%m-%d') as updateTime,
        create_user as createUser,
        update_user as updateUser

        from category
        <where>
            <if test="name != null">
                AND name LIKE CONCAT('%', #{name}, '%')
            </if>
            <if test="type != null">
                AND type = #{type}
            </if>
        </where>
        # 根据sort排序
        order by sort desc
    </select>
</mapper>
